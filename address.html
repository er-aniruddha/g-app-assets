<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="_token" content="{{csrf_token()}}" />
  <title>Cozy Store</title>
  <!-- Bootstrap core CSS -->
  <link href="bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Icons -->
  <link href="materialdesignicons.min.css" media="all" rel="stylesheet" type="text/css" />
  <!-- Custom styles for this template -->
  <link href="style.css" rel="stylesheet">
  <!-- jQuery Ajax -->
  <script src="jquery_ajax.js"></script>
</head>

<body>
  <!-- Address Strat -->
  <div class="container-fluid">
    <div class="row">
      <div class="address-block">
        <form method="POST">
          <div class="delivery-add">
            <div class="pick-add">
              <div id="_gps_chkBtn">
                <h5><a href="javascript:void(0);"><span class="loc-txt"><span class="mdi mdi-target">
                      </span> Use my current location</span></a></h5>
              </div>

              <div class="text-center" id="_spinner_Btn" style="display: none;">
                <h5>
                  <a href="javascript:void(0);">
                    <span class="loc-txt">
                      <div class="spinner-border spinner-border-sm" role="status">
                        <span class="sr-only">Loading...</span>
                      </div>
                    </span>
                  </a>
                </h5>
              </div>
            </div>
            <!-- Place Name will be here when get -->
            <p id="_place_name"></p>
            <div class="form-group">              
              <select class="select2 form-control border-form-control store" name="store_id" id="store_id" value=""></select>
                <option selected="selected" value="0">Select Brand</option>
              <label class="control-label">Select City</label>
            </div>               

            <fieldset class="form-group">
              <input type="number" name="phone" id="phone" class="form-control" autocorrect="off" autofocus="autofocus"
                autocomplete="off" animate="true" onKeyPress="if(this.value.length==10) return false;">
              <label>Alt Phone Number</label>
            </fieldset>
            <fieldset class="form-group">
              <input type="number" name="input_place_name" id="input_place_name" class="form-control" >
              <label>Text</label>
            </fieldset>
            <fieldset class="form-group">
              <input type="number" name="u_long" id="u_long" class="form-control" >
              <label>Text</label>
            </fieldset>
            <fieldset class="form-group">
              <input type="number" name="u_lat" id="u_lat" class="form-control" >
              <label>Text</label>
            </fieldset>

            <!-- <small class="text-danger">Please provide the number and street.</small> -->
          </div>
        </form>
      </div>
    </div>
  </div>
  <!-- Address End -->

  <!-- Footer Block Start -->
  <div class="footer-btn">
    <!--<a class="chkout-btn" href="checkout.html"><h4 class="float-left"><i class="mdi mdi-cart-outline"></i> Checkout </h4><span class="float-right"><strong>&#8377; 1200.69</strong> </span></a>-->
    <button type="submit" class="chkout-btn">
      next
    </button>
  </div>
  <!-- Footer Block End -->

  <!-- Bootstrap core JavaScript -->
  <script src="bootstrap.bundle.min.js"></script>
  <script >  
    $(document).ready(function (){

      // var base_url = window.AppInventor.getWebViewString(); 
      var base_url = "http://localhost"
      $.ajax({
        method:'GET',
        url: base_url+"/app/api/store/list",
        dataType:"json",
        success:function(data){
          for(var count=0 ; count < data.stores.length; count++){
            $(".select2").append('<option value="'+data.stores[count].store_id+'">'+data.stores[count].store_name+'</option>');           
          }
        },
      });

      $("select.store").change(function(){  
        store_long = $(this).find(':selected').data('long');
        store_lat = $(this).find(':selected').data('lat'); 
        tripCalculation();
      });

      

      

      $("#_gps_chkBtn").click(function () {
        $("#_gps_chkBtn").hide();
        $(".pick-add").hide();
        window.AppInventor.setWebViewString("gps_chkBtn");
      });

      var appInventor_locationName = window.AppInventor.getWebViewString();

      if(appInventor_locationName){
        document.getElementById('_place_name').innerHTML = appInventor_locationName;
        $("#_gps_chkBtn").hide();
        $(".pick-add").hide();  
      }
      

    });

  </script>
</body>

</html>
